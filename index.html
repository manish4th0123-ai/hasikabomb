<!DOCTYPE html>
<html>
<head>
  <title>Hasi Ka Bomb - Funny Face Cam</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="module">
    import { Player, Webcam, Dom } from "https://cdn.jsdelivr.net/npm/@banuba/webar/dist/BanubaSDK.browser.esm.js";

    let player;
    window.addEventListener("DOMContentLoaded", async () => {
      player = await Player.create({
        clientToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.demo-token-for-hasikabomb-testing"
      });

      const webcam = new Webcam();
      await player.use(webcam);

      Dom.render(player, document.body);

      const ctrl = document.createElement('div');
      ctrl.style = 'position:fixed;bottom:10px;left:50%;transform:translateX(-50%);display:flex;gap:10px;z-index:1000;';
      document.body.appendChild(ctrl);

      ["funny/big-nose","funny/elephant-ears","funny/balloon-belly","funny/cat-face","funny/donkey-ears"].forEach(effect => {
        const btn = document.createElement('button');
        btn.textContent = effect.split('/')[1].replace('-', ' ');
        btn.style = 'padding:8px 14px;font-size:14px;background:#f90;color:#000;border:none;border-radius:5px;';
        btn.onclick = () => player.applyEffect(effect);
        ctrl.appendChild(btn);
      });

      const cap = document.createElement('button');
      cap.textContent = "ðŸ“¸ Capture";
      cap.style = 'padding:8px 14px;font-size:14px;background:#44f;color:white;border:none;border-radius:5px;';
      cap.onclick = async () => {
        const img = await player.screenshot();
        const w = window.open('');
        w.document.write(`<img src="${img}">`);
      };
      ctrl.appendChild(cap);
    });
  </script>
</head>
<body style="margin:0;padding:0;background:#000;"></body>
</html>
